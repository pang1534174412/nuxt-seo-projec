{
    "openapi": "3.0.0",
    "info": {
        "title": "ai_music",
        "description": "",
        "version": "1.0.0"
    },
    "paths": {
        "\/apple\/cancel": {
            "post": {
                "summary": "取消苹果订单",
                "description": "取消苹果内购订单",
                "tags": [
                    "Apple Pay"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "tran_no"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "integer",
                                        "example": 0,
                                        "description": "苹果支付状态"
                                    },
                                    "tran_no": {
                                        "type": "string",
                                        "example": "20241201123456-12345-789",
                                        "description": "订单号"
                                    },
                                    "errorCode": {
                                        "type": "integer",
                                        "example": 2,
                                        "description": "错误码"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "example": 1,
                                            "description": "响应状态：1-成功，0-失败"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "取消订单成功"
                    }
                }
            }
        },
        "\/apple\/create": {
            "post": {
                "summary": "创建苹果订单",
                "description": "创建苹果内购订单",
                "tags": [
                    "Apple Pay"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "goods_id"
                                ],
                                "properties": {
                                    "goods_id": {
                                        "type": "integer",
                                        "example": 1001,
                                        "description": "商品ID"
                                    },
                                    "product_type": {
                                        "enum": [
                                            1,
                                            2
                                        ],
                                        "type": "integer",
                                        "default": 2,
                                        "example": 2,
                                        "description": "产品类型：1-金币，2-VIP"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "example": 1,
                                            "description": "响应状态：1-成功，0-失败"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "tran_no": {
                                                    "type": "string",
                                                    "example": "20241201123456-12345-789",
                                                    "description": "订单号"
                                                },
                                                "pay_item": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1001,
                                                            "description": "商品ID"
                                                        },
                                                        "sku": {
                                                            "type": "string",
                                                            "example": "com.aimusic.vip1month",
                                                            "description": "商品SKU"
                                                        },
                                                        "days": {
                                                            "type": "integer",
                                                            "example": 30,
                                                            "description": "VIP天数"
                                                        },
                                                        "money": {
                                                            "type": "string",
                                                            "example": "7.99",
                                                            "description": "价格"
                                                        },
                                                        "title": {
                                                            "type": "string",
                                                            "example": "VIP 1 Month",
                                                            "description": "商品标题"
                                                        },
                                                        "product_type": {
                                                            "type": "integer",
                                                            "example": 2,
                                                            "description": "产品类型"
                                                        }
                                                    }
                                                },
                                                "product_type": {
                                                    "type": "integer",
                                                    "example": 2,
                                                    "description": "产品类型"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "创建订单成功"
                    }
                }
            }
        },
        "\/apple\/notice": {
            "post": {
                "summary": "苹果支付通知",
                "description": "接收苹果服务器的支付状态通知（无需认证）",
                "tags": [
                    "Apple Pay"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "environment": {
                                        "enum": [
                                            "Sandbox",
                                            "Production"
                                        ],
                                        "type": "string",
                                        "example": "Production",
                                        "description": "环境"
                                    },
                                    "transaction_id": {
                                        "type": "string",
                                        "example": "1000000123456789",
                                        "description": "交易ID"
                                    },
                                    "notification_type": {
                                        "enum": [
                                            "SUBSCRIBED",
                                            "DID_RENEW",
                                            "EXPIRED",
                                            "DID_FAIL_TO_RENEW",
                                            "REFUND"
                                        ],
                                        "type": "string",
                                        "example": "SUBSCRIBED",
                                        "description": "通知类型"
                                    },
                                    "notification_uuid": {
                                        "type": "string",
                                        "example": "uuid-1234-5678-9012",
                                        "description": "苹果返回的通知唯一ID"
                                    }
                                },
                                "description": "苹果服务器通知数据"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success",
                                            "description": "处理状态"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "通知处理结果"
                    }
                }
            }
        },
        "\/apple\/verify": {
            "post": {
                "summary": "验证苹果支付",
                "description": "验证苹果内购支付结果",
                "tags": [
                    "Apple Pay"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "tran_no"
                                ],
                                "properties": {
                                    "tran_no": {
                                        "type": "string",
                                        "example": "20241201123456-12345-789",
                                        "description": "订单号"
                                    },
                                    "product_id": {
                                        "type": "string",
                                        "example": "com.aimusic.vip1month",
                                        "description": "产品ID\/SKU"
                                    },
                                    "product_type": {
                                        "enum": [
                                            1,
                                            2
                                        ],
                                        "type": "integer",
                                        "example": 2,
                                        "description": "产品类型：1-金币，2-VIP"
                                    },
                                    "receipt_data": {
                                        "type": "string",
                                        "example": "base64_encoded_receipt_data",
                                        "description": "苹果收据数据"
                                    },
                                    "transaction_id": {
                                        "type": "string",
                                        "example": "1000000123456789",
                                        "description": "苹果交易ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "example": 1,
                                            "description": "响应状态：1-成功，0-失败"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "money": {
                                                    "type": "string",
                                                    "example": "7.99",
                                                    "description": "支付金额"
                                                },
                                                "goods_id": {
                                                    "type": "integer",
                                                    "example": 1001,
                                                    "description": "商品ID"
                                                },
                                                "user_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "uid": {
                                                            "type": "integer",
                                                            "example": 12345
                                                        },
                                                        "is_vip": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "vip_exp": {
                                                            "type": "string",
                                                            "example": "2024-01-01 12:00:00"
                                                        },
                                                        "nickname": {
                                                            "type": "string",
                                                            "example": "音乐爱好者"
                                                        }
                                                    }
                                                },
                                                "is_sandbox": {
                                                    "type": "integer",
                                                    "example": 0,
                                                    "description": "是否沙盒环境：0-生产，1-沙盒"
                                                },
                                                "account_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "money": {
                                                            "type": "integer",
                                                            "example": 1000,
                                                            "description": "金币余额"
                                                        }
                                                    }
                                                },
                                                "product_type": {
                                                    "type": "integer",
                                                    "example": 2,
                                                    "description": "产品类型"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "验证支付结果"
                    }
                }
            }
        },
        "\/report\/types": {
            "get": {
                "summary": "获取举报类型列表",
                "description": "获取所有可用的举报类型选项",
                "tags": [
                    "Report"
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "types": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "example": 1,
                                                                        "description": "举报类型ID"
                                                                    },
                                                                    "type": {
                                                                        "type": "string",
                                                                        "example": "Inappropriate Content",
                                                                        "description": "举报类型名称"
                                                                    }
                                                                }
                                                            },
                                                            "description": "举报类型列表"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "Failed to get report types, please try again later",
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "举报类型列表响应"
                    }
                }
            }
        },
        "\/report\/submit": {
            "post": {
                "summary": "提交举报",
                "description": "提交对音乐内容的举报",
                "tags": [
                    "Report"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "target_id",
                                    "type"
                                ],
                                "properties": {
                                    "url": {
                                        "type": "string",
                                        "format": "uri",
                                        "example": "https:\/\/example.com\/evidence",
                                        "maxLength": 500,
                                        "description": "相关URL（可选）"
                                    },
                                    "type": {
                                        "type": "array",
                                        "items": {
                                            "enum": [
                                                1,
                                                2,
                                                3,
                                                4
                                            ],
                                            "type": "integer"
                                        },
                                        "example": [
                                            1,
                                            2
                                        ],
                                        "minItems": 1,
                                        "description": "举报类型ID数组"
                                    },
                                    "content": {
                                        "type": "string",
                                        "example": "This content contains inappropriate material",
                                        "maxLength": 200,
                                        "description": "举报内容描述（可选）"
                                    },
                                    "target_id": {
                                        "type": "integer",
                                        "example": 12345,
                                        "minimum": 1,
                                        "description": "被举报的目标ID（音乐ID）"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "提交成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=提交成功"
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "参数验证错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=验证失败"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "example": {
                                                        "type": [
                                                            "Please select at least one report type"
                                                        ],
                                                        "target_id": [
                                                            "Target ID cannot be empty"
                                                        ]
                                                    },
                                                    "description": "验证错误详情",
                                                    "additionalProperties": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "业务逻辑错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=业务错误"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "examples": [
                                                        "You have already reported this content",
                                                        "Invalid report type ID: 5",
                                                        "Failed to submit report, please try again later"
                                                    ],
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "举报提交响应"
                    }
                }
            }
        },
        "\/vip\/submit": {
            "post": {
                "summary": "VIP测试充值（仅开发环境）",
                "description": "模拟VIP购买流程，仅在开发环境可用，用于测试VIP功能和奖励发放",
                "tags": [
                    "VIP"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "goods_id"
                                ],
                                "properties": {
                                    "goods_id": {
                                        "type": "integer",
                                        "example": 2001,
                                        "minimum": 1,
                                        "description": "VIP商品ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "balance": {
                                                            "type": "integer",
                                                            "description": "用户金币余额（冗余字段）"
                                                        },
                                                        "user_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "用户邮箱"
                                                                },
                                                                "avatar": {
                                                                    "type": "string",
                                                                    "description": "用户头像URL"
                                                                },
                                                                "is_vip": {
                                                                    "enum": [
                                                                        0,
                                                                        1
                                                                    ],
                                                                    "type": "integer",
                                                                    "description": "是否VIP：0=普通用户，1=VIP用户"
                                                                },
                                                                "balance": {
                                                                    "type": "integer",
                                                                    "description": "用户金币余额"
                                                                },
                                                                "vip_exp": {
                                                                    "type": "integer",
                                                                    "description": "VIP到期时间戳"
                                                                },
                                                                "nickname": {
                                                                    "type": "string",
                                                                    "description": "用户昵称"
                                                                }
                                                            },
                                                            "description": "用户信息"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "examples": [
                                                        "Test environment only",
                                                        "Invalid goods_id",
                                                        "VIP item not found",
                                                        "Failed to save pay log",
                                                        "Failed to process recharge"
                                                    ],
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "VIP测试充值响应"
                    }
                }
            }
        },
        "\/vip\/list": {
            "get": {
                "summary": "获取VIP套餐列表",
                "description": "获取可用的VIP套餐列表，支持未登录用户访问",
                "tags": [
                    "VIP"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "channel",
                        "schema": {
                            "enum": [
                                "com.aimusic.home.a",
                                "com.aimusic.home"
                            ],
                            "type": "string",
                            "default": "com.aimusic.home.a"
                        },
                        "example": "com.aimusic.home.a",
                        "description": "应用包名（渠道标识）"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "enum": [
                                                1
                                            ],
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "vip_list": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/VipPackage"
                                                    },
                                                    "description": "VIP套餐列表"
                                                },
                                                "user_vip_status": {
                                                    "type": "object",
                                                    "properties": {
                                                        "is_vip": {
                                                            "enum": [
                                                                0,
                                                                1
                                                            ],
                                                            "type": "integer",
                                                            "description": "是否VIP：0=普通用户，1=VIP用户"
                                                        },
                                                        "vip_exp": {
                                                            "type": "integer",
                                                            "description": "VIP到期时间戳"
                                                        },
                                                        "remaining_days": {
                                                            "type": "integer",
                                                            "description": "VIP剩余天数"
                                                        }
                                                    },
                                                    "description": "用户VIP状态（仅登录用户返回）"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "VIP套餐列表响应"
                    }
                }
            }
        },
        "\/google\/verify": {
            "post": {
                "summary": "Google ID Token验证",
                "description": "验证Google ID Token并返回用户信息，支持H5和App共用",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id_token",
                                    "channel"
                                ],
                                "properties": {
                                    "channel": {
                                        "enum": [
                                            "com.aimusic.home.a",
                                            "com.aimusic.home"
                                        ],
                                        "type": "string",
                                        "example": "com.aimusic.home",
                                        "description": "应用包名（渠道标识）"
                                    },
                                    "id_token": {
                                        "type": "string",
                                        "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImY4MmZhYzc5ZjNjOTkzMGIzMWNkIn0...",
                                        "maxLength": 2048,
                                        "description": "Google ID Token"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "验证成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=验证成功"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "",
                                                    "description": "成功消息"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string",
                                                            "example": "John Doe",
                                                            "description": "用户姓名"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "user@gmail.com",
                                                            "description": "用户邮箱"
                                                        },
                                                        "channel": {
                                                            "type": "string",
                                                            "example": "com.test.h5",
                                                            "description": "应用包名"
                                                        },
                                                        "picture": {
                                                            "type": "string",
                                                            "example": "https:\/\/lh3.googleusercontent.com\/...",
                                                            "description": "用户头像URL"
                                                        },
                                                        "google_id": {
                                                            "type": "string",
                                                            "example": "1234567890123456789",
                                                            "description": "用户的Google ID"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "验证失败响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=验证失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "examples": [
                                                        "unsupported channel",
                                                        "id_token value empty",
                                                        "client_id mismatch",
                                                        "token expired",
                                                        "invalid issuer",
                                                        "payload empty",
                                                        "验证失败，请稍后重试"
                                                    ],
                                                    "description": "错误消息"
                                                },
                                                "data": {
                                                    "type": "null",
                                                    "description": "失败时data为null"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "Google Token验证响应"
                    }
                }
            }
        },
        "\/feedback\/submit": {
            "post": {
                "summary": "Submit Feedback",
                "description": "Submit user feedback with text content and\/or images",
                "tags": [
                    "Feedback"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "photos": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "url"
                                            ],
                                            "properties": {
                                                "url": {
                                                    "type": "string",
                                                    "example": "feedback\/15927481\/e1fdf8865f6cc1bbb8c8f690bdfa8e8e.jpg",
                                                    "description": "Photo URL path"
                                                },
                                                "width": {
                                                    "type": "integer",
                                                    "example": 499,
                                                    "description": "Photo width in pixels"
                                                },
                                                "height": {
                                                    "type": "integer",
                                                    "example": 493,
                                                    "description": "Photo height in pixels"
                                                }
                                            }
                                        },
                                        "maxItems": 9,
                                        "description": "Array of photo objects (max 9 photos)"
                                    },
                                    "content": {
                                        "type": "string",
                                        "example": "I love this app, but I found a small issue...",
                                        "maxLength": 1000,
                                        "description": "Feedback text content (max 1000 characters)"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "Status code: 1=success, 0=failure"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "Error message (returned on failure)"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "Submit feedback response"
                    }
                }
            }
        },
        "\/email\/reset-password": {
            "post": {
                "summary": "Reset Email Password",
                "description": "Reset user login password with email and new password",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com",
                                        "description": "Email address"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "newpassword123",
                                        "maxLength": 32,
                                        "minLength": 6,
                                        "description": "New password (6-32 characters)"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "Status code: 1=success, 0=failure"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "Error message (returned on failure)"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "Reset password response"
                    }
                }
            }
        },
        "\/email\/send-code": {
            "post": {
                "summary": "发送邮箱验证码",
                "description": "发送邮箱验证码，支持注册、找回密码、绑定邮箱等场景",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email",
                                    "type"
                                ],
                                "properties": {
                                    "type": {
                                        "enum": [
                                            1,
                                            2,
                                            3
                                        ],
                                        "type": "integer",
                                        "example": 1,
                                        "description": "验证码类型：1=注册验证，2=找回密码，3=绑定邮箱"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com",
                                        "description": "邮箱地址"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "发送验证码响应"
                    }
                }
            }
        },
        "\/email\/verify-code": {
            "post": {
                "summary": "验证邮箱验证码",
                "description": "验证用户输入的邮箱验证码是否正确",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email",
                                    "code",
                                    "from_type"
                                ],
                                "properties": {
                                    "code": {
                                        "type": "string",
                                        "example": "1234",
                                        "pattern": "^[0-9]{4}$",
                                        "maxLength": 4,
                                        "minLength": 4,
                                        "description": "4位数字验证码"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com",
                                        "description": "邮箱地址"
                                    },
                                    "from_type": {
                                        "enum": [
                                            1,
                                            2,
                                            3
                                        ],
                                        "type": "integer",
                                        "example": 1,
                                        "description": "验证码类型：1=注册验证，2=找回密码，3=绑定邮箱"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=验证成功，0=验证失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "验证码验证响应"
                    }
                }
            }
        },
        "\/app\/init": {
            "post": {
                "summary": "初始化接口",
                "description": "在用户进入应用主界面时调用，用于更新设备信息、记录登录日志并返回用户信息。",
                "tags": [
                    "App"
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "user_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "sex": {
                                                            "type": "integer"
                                                        },
                                                        "uid": {
                                                            "type": "integer"
                                                        },
                                                        "avatar": {
                                                            "type": "string"
                                                        },
                                                        "is_vip": {
                                                            "type": "integer"
                                                        },
                                                        "nickname": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "初始化响应"
                    }
                }
            }
        },
        "\/app\/close": {
            "post": {
                "summary": "用户关闭APP",
                "description": "记录用户关闭应用的行为。",
                "tags": [
                    "App"
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "操作响应"
                    }
                }
            }
        },
        "\/app\/open": {
            "post": {
                "summary": "用户打开APP",
                "description": "记录用户打开应用的行为，并检查账号状态。",
                "tags": [
                    "App"
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功, 99=账号被删除或不存在"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "操作响应"
                    }
                }
            }
        },
        "\/upload\/create-media": {
            "post": {
                "summary": "创建媒体记录",
                "description": "文件上传成功后，调用此接口创建媒体记录",
                "tags": [
                    "Upload"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "upload_id",
                                    "media_type"
                                ],
                                "properties": {
                                    "upload_id": {
                                        "type": "integer",
                                        "example": 123,
                                        "description": "上传记录ID"
                                    },
                                    "media_type": {
                                        "type": "integer",
                                        "example": 0,
                                        "description": "媒体类型：0-图片，1-视频，2-语音"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "media_id": {
                                                    "type": "integer",
                                                    "description": "媒体ID"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "创建媒体记录响应"
                    }
                }
            }
        },
        "\/music\/status": {
            "post": {
                "summary": "获取音乐生成状态",
                "description": "前端轮询接口，用于检查音乐是否已生成完成",
                "tags": [
                    "Music"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 123,
                                        "minimum": 1,
                                        "description": "音乐ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "status": {
                                                            "enum": [
                                                                0,
                                                                1,
                                                                -1
                                                            ],
                                                            "type": "integer",
                                                            "description": "生成状态：0=生成中，1=生成完成，-1=已删除"
                                                        },
                                                        "music_id": {
                                                            "type": "integer",
                                                            "description": "音乐ID"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "Music not found",
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "音乐状态响应"
                    }
                }
            }
        },
        "\/music\/delete": {
            "post": {
                "summary": "删除音乐",
                "description": "删除用户自己的音乐作品（软删除，将status设为-1）",
                "tags": [
                    "Music"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 123,
                                        "minimum": 1,
                                        "description": "音乐ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "deleted": {
                                                            "type": "boolean",
                                                            "description": "删除状态：true=已删除"
                                                        },
                                                        "message": {
                                                            "type": "string",
                                                            "example": "Music deleted successfully",
                                                            "description": "操作结果消息"
                                                        },
                                                        "music_id": {
                                                            "type": "integer",
                                                            "description": "音乐ID"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "Music not found or you do not have permission to delete it",
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "删除音乐响应"
                    }
                }
            }
        },
        "\/upload\/success": {
            "post": {
                "summary": "标记上传成功",
                "description": "前端上传到S3成功后，调用此接口标记上传完成，更新数据库状态",
                "tags": [
                    "Upload"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        "example": [
                                            1,
                                            2,
                                            3
                                        ],
                                        "description": "上传记录ID数组，对应获取预签名时返回的upload_id"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "上传成功",
                                                    "description": "成功消息"
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "标记上传成功失败",
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "上传成功标记响应"
                    }
                }
            }
        },
        "\/upload\/presigned": {
            "post": {
                "summary": "获取S3预签名上传参数",
                "description": "获取S3预签名上传参数，支持单文件和批量上传。支持头像(avatar)和AI提示封面(ai_prompt_cover)两种类型",
                "tags": [
                    "Upload"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "type": "object",
                                        "title": "单文件上传",
                                        "required": [
                                            "flag"
                                        ],
                                        "properties": {
                                            "md5": {
                                                "type": "string",
                                                "example": "d73346eeaf0e3d8d0df9df0f92d5c72c",
                                                "maxLength": 64,
                                                "description": "文件MD5值，用于去重检查（可选）"
                                            },
                                            "flag": {
                                                "enum": [
                                                    "avatar",
                                                    "ai_prompt_cover"
                                                ],
                                                "type": "string",
                                                "example": "avatar",
                                                "description": "上传类型：avatar=头像，ai_prompt_cover=AI提示封面"
                                            },
                                            "type": {
                                                "enum": [
                                                    1,
                                                    2,
                                                    3
                                                ],
                                                "type": "integer",
                                                "default": 1,
                                                "example": 1,
                                                "description": "媒体类型：1=图片，2=视频，3=语音"
                                            },
                                            "width": {
                                                "type": "integer",
                                                "default": 300,
                                                "example": 300,
                                                "maximum": 5000,
                                                "minimum": 1,
                                                "description": "图片宽度（可选）"
                                            },
                                            "height": {
                                                "type": "integer",
                                                "default": 300,
                                                "example": 300,
                                                "maximum": 5000,
                                                "minimum": 1,
                                                "description": "图片高度（可选）"
                                            },
                                            "img_type": {
                                                "type": "string",
                                                "example": "png",
                                                "maxLength": 16,
                                                "description": "原始图片类型（可选）"
                                            },
                                            "out_width": {
                                                "type": "integer",
                                                "default": 200,
                                                "example": 200,
                                                "maximum": 5000,
                                                "minimum": 1,
                                                "description": "输出宽度（可选）"
                                            },
                                            "out_height": {
                                                "type": "integer",
                                                "default": 200,
                                                "example": 200,
                                                "maximum": 5000,
                                                "minimum": 1,
                                                "description": "输出高度（可选）"
                                            }
                                        }
                                    },
                                    {
                                        "type": "object",
                                        "title": "批量上传",
                                        "required": [
                                            "list"
                                        ],
                                        "properties": {
                                            "list": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "required": [
                                                        "flag"
                                                    ],
                                                    "properties": {
                                                        "md5": {
                                                            "type": "string",
                                                            "maxLength": 64,
                                                            "description": "文件MD5值（可选）"
                                                        },
                                                        "flag": {
                                                            "enum": [
                                                                "avatar",
                                                                "ai_prompt_cover"
                                                            ],
                                                            "type": "string",
                                                            "description": "上传类型：avatar=头像，ai_prompt_cover=AI提示封面"
                                                        },
                                                        "type": {
                                                            "enum": [
                                                                1,
                                                                2,
                                                                3
                                                            ],
                                                            "type": "integer",
                                                            "default": 1,
                                                            "description": "媒体类型：1=图片，2=视频，3=语音"
                                                        },
                                                        "width": {
                                                            "type": "integer",
                                                            "default": 300,
                                                            "maximum": 5000,
                                                            "minimum": 1,
                                                            "description": "图片宽度（可选）"
                                                        },
                                                        "height": {
                                                            "type": "integer",
                                                            "default": 300,
                                                            "maximum": 5000,
                                                            "minimum": 1,
                                                            "description": "图片高度（可选）"
                                                        },
                                                        "img_type": {
                                                            "type": "string",
                                                            "maxLength": 16,
                                                            "description": "原始图片类型（可选）"
                                                        }
                                                    }
                                                },
                                                "example": [
                                                    {
                                                        "md5": "abc123",
                                                        "flag": "avatar",
                                                        "type": 1,
                                                        "width": 300,
                                                        "height": 300
                                                    },
                                                    {
                                                        "md5": "def456",
                                                        "flag": "ai_prompt_cover",
                                                        "type": 1,
                                                        "width": 400,
                                                        "height": 400
                                                    }
                                                ],
                                                "description": "批量上传文件列表"
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "单文件上传响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "data": {
                                                    "$ref": "#\/components\/schemas\/UploadPresignedData"
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "批量上传响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "list": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#\/components\/schemas\/UploadPresignedData"
                                                            },
                                                            "description": "批量预签名数据列表"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "预签名参数响应"
                    }
                }
            }
        },
        "\/music\/hall": {
            "get": {
                "summary": "获取音乐大厅列表",
                "description": "获取热门音乐列表，按点赞数量倒序排列，包含用户点赞状态，支持搜索功能",
                "tags": [
                    "Music"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        },
                        "example": 1,
                        "description": "页码（可选）"
                    },
                    {
                        "in": "query",
                        "name": "pageSize",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        },
                        "example": 20,
                        "description": "每页数量（可选）"
                    },
                    {
                        "in": "query",
                        "name": "search_text",
                        "schema": {
                            "type": "string",
                            "maxLength": 50
                        },
                        "example": "love song",
                        "description": "搜索关键词（可选），用于搜索音乐标题、歌词等内容"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "list": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicHallItem"
                                                    },
                                                    "description": "热门音乐列表"
                                                },
                                                "has_more": {
                                                    "enum": [
                                                        0,
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "是否有更多数据：0=没有更多，1=有更多"
                                                },
                                                "user_infos": {
                                                    "type": "object",
                                                    "description": "用户信息映射表，key为用户ID",
                                                    "additionalProperties": {
                                                        "$ref": "#\/components\/schemas\/UserInfo"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "音乐大厅列表响应"
                    }
                }
            }
        },
        "\/music\/category-list": {
            "get": {
                "summary": "获取分类音乐列表",
                "description": "根据类型获取不同分类的音乐列表（我的作品、我的点赞、草稿、下载记录）",
                "tags": [
                    "Music"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "type",
                        "schema": {
                            "enum": [
                                1,
                                2,
                                3,
                                4
                            ],
                            "type": "integer"
                        },
                        "example": 1,
                        "required": true,
                        "description": "分类类型：1=我的作品，2=我的点赞，3=草稿（暂未实现），4=下载记录"
                    },
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        },
                        "example": 1,
                        "description": "页码（可选）"
                    },
                    {
                        "in": "query",
                        "name": "pageSize",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        },
                        "example": 20,
                        "description": "每页数量（可选）"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "list": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicListItem"
                                                    },
                                                    "description": "音乐列表"
                                                },
                                                "has_more": {
                                                    "enum": [
                                                        0,
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "是否有更多数据：0=没有更多，1=有更多"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "分类列表响应"
                    }
                }
            }
        },
        "\/music\/my": {
            "get": {
                "summary": "获取我的页面数据",
                "description": "获取用户基本信息和My Works第一页音乐列表",
                "tags": [
                    "Music"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        },
                        "example": 1,
                        "description": "页码（可选）"
                    },
                    {
                        "in": "query",
                        "name": "pageSize",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        },
                        "example": 20,
                        "description": "每页数量（可选）"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "my_works": {
                                                    "type": "object",
                                                    "properties": {
                                                        "list": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#\/components\/schemas\/MusicListItem"
                                                            },
                                                            "description": "我的作品列表"
                                                        },
                                                        "has_more": {
                                                            "enum": [
                                                                0,
                                                                1
                                                            ],
                                                            "type": "integer",
                                                            "description": "是否有更多数据：0=没有更多，1=有更多"
                                                        }
                                                    }
                                                },
                                                "user_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "uid": {
                                                            "type": "integer",
                                                            "description": "用户ID"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "description": "用户头像URL"
                                                        },
                                                        "is_vip": {
                                                            "type": "boolean",
                                                            "description": "是否VIP用户"
                                                        },
                                                        "credits": {
                                                            "type": "integer",
                                                            "example": 850,
                                                            "description": "用户积分"
                                                        },
                                                        "nickname": {
                                                            "type": "string",
                                                            "description": "用户昵称"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "我的页面数据响应"
                    }
                }
            }
        },
        "\/music\/download": {
            "post": {
                "summary": "记录音乐下载",
                "description": "记录用户下载音乐的行为（暂不提供实际下载功能）",
                "tags": [
                    "Music"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 123,
                                        "minimum": 1,
                                        "description": "音乐ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "description": "操作结果消息"
                                                },
                                                "music_id": {
                                                    "type": "integer",
                                                    "description": "音乐ID"
                                                },
                                                "downloaded": {
                                                    "type": "boolean",
                                                    "description": "下载状态：true=已记录"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "下载记录响应"
                    }
                }
            }
        },
        "\/music\/unlike": {
            "post": {
                "summary": "取消音乐点赞",
                "description": "用户取消对音乐的点赞操作",
                "tags": [
                    "Music"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 123,
                                        "minimum": 1,
                                        "description": "音乐ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "is_liked": {
                                                    "type": "boolean",
                                                    "description": "点赞状态：false=未点赞"
                                                },
                                                "music_id": {
                                                    "type": "integer",
                                                    "description": "音乐ID"
                                                },
                                                "like_count": {
                                                    "type": "integer",
                                                    "description": "总点赞数"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "取消点赞响应"
                    }
                }
            }
        },
        "\/music\/like": {
            "post": {
                "summary": "音乐点赞",
                "description": "用户对音乐进行点赞操作",
                "tags": [
                    "Music"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 123,
                                        "minimum": 1,
                                        "description": "音乐ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "is_liked": {
                                                    "type": "boolean",
                                                    "description": "点赞状态：true=已点赞"
                                                },
                                                "music_id": {
                                                    "type": "integer",
                                                    "description": "音乐ID"
                                                },
                                                "like_count": {
                                                    "type": "integer",
                                                    "description": "总点赞数"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "点赞响应"
                    }
                }
            }
        },
        "\/music\/options": {
            "get": {
                "summary": "获取音乐选项数据",
                "description": "获取音乐风格、心情、语言、乐器等选项数据，无需登录",
                "tags": [
                    "Music"
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "moods": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicOption"
                                                    },
                                                    "description": "音乐心情选项"
                                                },
                                                "styles": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicOption"
                                                    },
                                                    "description": "音乐风格选项"
                                                },
                                                "languages": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicOption"
                                                    },
                                                    "description": "音乐语言选项"
                                                },
                                                "instruments": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicOption"
                                                    },
                                                    "description": "音乐乐器选项"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "选项数据响应"
                    }
                }
            }
        },
        "\/music\/list": {
            "get": {
                "summary": "获取用户音乐列表",
                "description": "获取当前用户的音乐作品列表，支持分页",
                "tags": [
                    "Music"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "page",
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        },
                        "example": 1,
                        "description": "页码"
                    },
                    {
                        "in": "query",
                        "name": "pageSize",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        },
                        "example": 20,
                        "description": "每页数量"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "list": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#\/components\/schemas\/MusicListItem"
                                                    },
                                                    "description": "音乐列表"
                                                },
                                                "has_more": {
                                                    "enum": [
                                                        0,
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "是否有更多数据：0=没有更多，1=有更多"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "音乐列表响应"
                    }
                }
            }
        },
        "\/login\/handle": {
            "post": {
                "summary": "用户登录",
                "description": "支持邮箱密码登录、Google登录和Apple登录",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "type": "object",
                                        "title": "邮箱登录",
                                        "required": [
                                            "email",
                                            "password",
                                            "login_from"
                                        ],
                                        "properties": {
                                            "email": {
                                                "type": "string",
                                                "format": "email",
                                                "example": "user@example.com",
                                                "description": "用户邮箱"
                                            },
                                            "password": {
                                                "type": "string",
                                                "example": "password123",
                                                "minLength": 6,
                                                "description": "用户密码"
                                            },
                                            "login_from": {
                                                "enum": [
                                                    2
                                                ],
                                                "type": "integer",
                                                "example": 2,
                                                "description": "登录类型：2=邮箱登录"
                                            }
                                        }
                                    },
                                    {
                                        "type": "object",
                                        "title": "Google登录",
                                        "required": [
                                            "id_token",
                                            "channel",
                                            "login_from"
                                        ],
                                        "properties": {
                                            "channel": {
                                                "enum": [
                                                    "com.aimusic.home.a",
                                                    "com.aimusic.home"
                                                ],
                                                "type": "string",
                                                "example": "com.aimusic.home",
                                                "description": "应用包名（渠道标识）"
                                            },
                                            "id_token": {
                                                "type": "string",
                                                "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImY4MmZhYzc5ZjNjOTkzMGIzMWNkIn0...",
                                                "maxLength": 2048,
                                                "description": "Google ID Token"
                                            },
                                            "login_from": {
                                                "enum": [
                                                    3
                                                ],
                                                "type": "integer",
                                                "example": 3,
                                                "description": "登录类型：3=Google登录"
                                            }
                                        }
                                    },
                                    {
                                        "type": "object",
                                        "title": "Apple登录",
                                        "required": [
                                            "apple_user_id",
                                            "login_from"
                                        ],
                                        "properties": {
                                            "user_info": {
                                                "type": "object",
                                                "properties": {
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "description": "用户邮箱"
                                                    },
                                                    "fullName": {
                                                        "type": "string",
                                                        "description": "用户全名"
                                                    }
                                                },
                                                "description": "Apple用户信息（可选）"
                                            },
                                            "login_from": {
                                                "enum": [
                                                    6
                                                ],
                                                "type": "integer",
                                                "example": 6,
                                                "description": "登录类型：6=Apple登录"
                                            },
                                            "apple_user_id": {
                                                "type": "string",
                                                "example": "000123.abc456def789ghi.1234",
                                                "maxLength": 255,
                                                "description": "Apple用户ID (openId)"
                                            },
                                            "identity_token": {
                                                "type": "string",
                                                "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhOVXpnNDQ...",
                                                "maxLength": 2048,
                                                "description": "Apple Identity Token（可选）"
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=登录成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "step": {
                                                            "type": "integer",
                                                            "description": "用户状态步骤：0=已完成，1=需要完善信息"
                                                        },
                                                        "token": {
                                                            "type": "string",
                                                            "description": "JWT访问令牌"
                                                        },
                                                        "user_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "uid": {
                                                                    "type": "integer",
                                                                    "description": "用户ID"
                                                                },
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "用户邮箱"
                                                                },
                                                                "avatar": {
                                                                    "type": "string",
                                                                    "description": "用户头像URL"
                                                                },
                                                                "nickname": {
                                                                    "type": "string",
                                                                    "description": "用户昵称"
                                                                }
                                                            }
                                                        },
                                                        "apple_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "Apple邮箱"
                                                                },
                                                                "full_name": {
                                                                    "type": "string",
                                                                    "description": "Apple用户全名"
                                                                },
                                                                "apple_user_id": {
                                                                    "type": "string",
                                                                    "description": "Apple用户ID"
                                                                }
                                                            },
                                                            "description": "Apple用户信息（仅Apple登录时返回）"
                                                        },
                                                        "google_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "name": {
                                                                    "type": "string",
                                                                    "description": "Google用户姓名"
                                                                },
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "Google邮箱"
                                                                },
                                                                "picture": {
                                                                    "type": "string",
                                                                    "description": "Google用户头像URL"
                                                                },
                                                                "google_id": {
                                                                    "type": "string",
                                                                    "description": "Google用户ID"
                                                                }
                                                            },
                                                            "description": "Google用户信息（仅Google登录时返回）"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "邮箱登录密码错误",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        3
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：3=密码错误"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "example": "密码错误",
                                                    "description": "错误消息"
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "错误响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "examples": [
                                                        "没有账号",
                                                        "Google账号未注册，请先注册",
                                                        "Apple账号未注册，请先注册",
                                                        "Google Token验证失败",
                                                        "不支持的登录类型"
                                                    ],
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "登录响应"
                    }
                }
            }
        },
        "\/login\/complete-profile": {
            "post": {
                "summary": "完善用户信息",
                "description": "完善用户昵称和头像信息",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "nickname"
                                ],
                                "properties": {
                                    "avatar": {
                                        "type": "string",
                                        "example": "https:\/\/example.com\/avatar.jpg",
                                        "description": "用户头像URL（可选）"
                                    },
                                    "nickname": {
                                        "type": "string",
                                        "example": "音乐爱好者",
                                        "maxLength": 50,
                                        "description": "用户昵称"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "uid": {
                                                    "type": "integer",
                                                    "description": "用户ID"
                                                },
                                                "step": {
                                                    "type": "integer",
                                                    "description": "用户状态步骤：1=已完成"
                                                },
                                                "user_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "uid": {
                                                            "type": "integer",
                                                            "description": "用户ID"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "description": "用户邮箱"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "description": "用户头像URL"
                                                        },
                                                        "nickname": {
                                                            "type": "string",
                                                            "description": "用户昵称"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "完善信息响应"
                    }
                }
            }
        },
        "\/music\/detail": {
            "get": {
                "summary": "获取音乐详情",
                "description": "根据音乐ID获取音乐的详细信息，包括AI生成的歌词",
                "tags": [
                    "Music"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "id",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        },
                        "example": 123,
                        "required": true,
                        "description": "音乐ID"
                    },
                    {
                        "in": "query",
                        "name": "target_uid",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        },
                        "example": 456,
                        "description": "目标用户ID（可选）。如果提供，则查询指定用户的音乐；如果不提供，则查询当前登录用户的音乐"
                    }
                ],
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "$ref": "#\/components\/schemas\/MusicDetail"
                                        }
                                    }
                                }
                            }
                        },
                        "description": "音乐详情响应"
                    }
                }
            }
        },
        "\/music\/create": {
            "post": {
                "summary": "创建音乐",
                "description": "根据用户选择的参数生成音乐，至少需要选择一项参数",
                "tags": [
                    "Music"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "mood": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            2
                                        ],
                                        "description": "音乐心情ID数组（可多选）"
                                    },
                                    "intro": {
                                        "type": "string",
                                        "example": "一首轻松愉快的流行歌曲",
                                        "maxLength": 200,
                                        "description": "生成音乐的提示词"
                                    },
                                    "style": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            1,
                                            3
                                        ],
                                        "description": "音乐风格ID数组（可多选）"
                                    },
                                    "title": {
                                        "type": "string",
                                        "example": "我的第一首歌",
                                        "maxLength": 100,
                                        "description": "音乐标题（可选）"
                                    },
                                    "lyrics": {
                                        "type": "string",
                                        "example": "关于爱情的歌曲",
                                        "maxLength": 300,
                                        "description": "歌词提示词（用于AI参考生成音乐）"
                                    },
                                    "language": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            1
                                        ],
                                        "description": "音乐语言ID数组（可多选）"
                                    },
                                    "instrument": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            1,
                                            2
                                        ],
                                        "description": "音乐乐器ID数组（可多选）"
                                    },
                                    "is_instrumental": {
                                        "enum": [
                                            0,
                                            1
                                        ],
                                        "type": "integer",
                                        "default": 0,
                                        "example": 0,
                                        "description": "是否为纯音乐：0=不是纯音乐，1=纯音乐（可选，默认为0）"
                                    },
                                    "intro_pic_media_id": {
                                        "type": "integer",
                                        "example": 456,
                                        "minimum": 1,
                                        "description": "提示图片媒体ID"
                                    },
                                    "intro_voice_media_id": {
                                        "type": "integer",
                                        "example": 123,
                                        "minimum": 1,
                                        "description": "录音文件媒体ID"
                                    }
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "integer",
                                            "description": "状态码：1=成功，0=失败"
                                        },
                                        "msg": {
                                            "type": "string",
                                            "description": "错误消息（失败时返回）"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "status": {
                                                    "type": "integer",
                                                    "description": "音乐状态：0=待AI处理，1=处理完成"
                                                },
                                                "music_id": {
                                                    "type": "integer",
                                                    "description": "音乐ID"
                                                },
                                                "mock_data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "format": {
                                                            "type": "string",
                                                            "description": "音频格式"
                                                        },
                                                        "duration": {
                                                            "type": "integer",
                                                            "description": "音频时长（秒）"
                                                        },
                                                        "audio_url": {
                                                            "type": "string",
                                                            "description": "音频文件URL"
                                                        },
                                                        "cover_url": {
                                                            "type": "string",
                                                            "description": "封面图URL"
                                                        },
                                                        "file_size": {
                                                            "type": "string",
                                                            "description": "文件大小"
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "description": "创建时间"
                                                        },
                                                        "like_count": {
                                                            "type": "integer",
                                                            "description": "点赞数量"
                                                        }
                                                    },
                                                    "description": "测试数据（用于前端开发）"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "description": "音乐创建响应"
                    }
                }
            }
        },
        "\/login\/register": {
            "post": {
                "summary": "用户注册",
                "description": "支持邮箱注册、Google注册和Apple注册",
                "tags": [
                    "Authentication"
                ],
                "requestBody": {
                    "content": {
                        "application\/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "type": "object",
                                        "title": "邮箱注册（兼容旧版本）",
                                        "required": [
                                            "email",
                                            "password"
                                        ],
                                        "properties": {
                                            "email": {
                                                "type": "string",
                                                "format": "email",
                                                "example": "newuser@example.com",
                                                "description": "注册邮箱"
                                            },
                                            "password": {
                                                "type": "string",
                                                "example": "password123",
                                                "minLength": 6,
                                                "description": "注册密码"
                                            },
                                            "register_from": {
                                                "enum": [
                                                    2
                                                ],
                                                "type": "integer",
                                                "example": 2,
                                                "description": "注册类型：2=邮箱注册（可选，兼容旧版本）"
                                            }
                                        }
                                    },
                                    {
                                        "type": "object",
                                        "title": "Google注册",
                                        "required": [
                                            "id_token",
                                            "channel",
                                            "register_from"
                                        ],
                                        "properties": {
                                            "channel": {
                                                "enum": [
                                                    "com.aimusic.home.a",
                                                    "com.aimusic.home"
                                                ],
                                                "type": "string",
                                                "example": "com.aimusic.home",
                                                "description": "应用包名（渠道标识）"
                                            },
                                            "id_token": {
                                                "type": "string",
                                                "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImY4MmZhYzc5ZjNjOTkzMGIzMWNkIn0...",
                                                "maxLength": 2048,
                                                "description": "Google ID Token"
                                            },
                                            "register_from": {
                                                "enum": [
                                                    3
                                                ],
                                                "type": "integer",
                                                "example": 3,
                                                "description": "注册类型：3=Google注册"
                                            }
                                        }
                                    },
                                    {
                                        "type": "object",
                                        "title": "Apple注册",
                                        "required": [
                                            "apple_user_id",
                                            "register_from"
                                        ],
                                        "properties": {
                                            "user_info": {
                                                "type": "object",
                                                "properties": {
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "description": "用户邮箱"
                                                    },
                                                    "fullName": {
                                                        "type": "string",
                                                        "description": "用户全名"
                                                    }
                                                },
                                                "description": "Apple用户信息（可选）"
                                            },
                                            "apple_user_id": {
                                                "type": "string",
                                                "example": "000123.abc456def789ghi.1234",
                                                "maxLength": 255,
                                                "description": "Apple用户ID (openId)"
                                            },
                                            "register_from": {
                                                "enum": [
                                                    6
                                                ],
                                                "type": "integer",
                                                "example": 6,
                                                "description": "注册类型：6=Apple注册"
                                            },
                                            "identity_token": {
                                                "type": "string",
                                                "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjhOVXpnNDQ...",
                                                "maxLength": 2048,
                                                "description": "Apple Identity Token（可选）"
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "object",
                                            "title": "注册成功响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        1
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：1=注册成功"
                                                },
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "token": {
                                                            "type": "string",
                                                            "description": "JWT访问令牌"
                                                        },
                                                        "user_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "uid": {
                                                                    "type": "integer",
                                                                    "description": "用户ID"
                                                                },
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "用户邮箱"
                                                                },
                                                                "avatar": {
                                                                    "type": "string",
                                                                    "nullable": true,
                                                                    "description": "用户头像URL（注册时为空）"
                                                                },
                                                                "nickname": {
                                                                    "type": "string",
                                                                    "nullable": true,
                                                                    "description": "用户昵称（注册时为空）"
                                                                }
                                                            }
                                                        },
                                                        "apple_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "Apple邮箱"
                                                                },
                                                                "full_name": {
                                                                    "type": "string",
                                                                    "description": "Apple用户全名"
                                                                },
                                                                "apple_user_id": {
                                                                    "type": "string",
                                                                    "description": "Apple用户ID"
                                                                }
                                                            },
                                                            "description": "Apple用户信息（仅Apple注册时返回）"
                                                        },
                                                        "google_info": {
                                                            "type": "object",
                                                            "properties": {
                                                                "name": {
                                                                    "type": "string",
                                                                    "description": "Google用户姓名"
                                                                },
                                                                "email": {
                                                                    "type": "string",
                                                                    "description": "Google邮箱"
                                                                },
                                                                "picture": {
                                                                    "type": "string",
                                                                    "description": "Google用户头像URL"
                                                                },
                                                                "google_id": {
                                                                    "type": "string",
                                                                    "description": "Google用户ID"
                                                                }
                                                            },
                                                            "description": "Google用户信息（仅Google注册时返回）"
                                                        },
                                                        "ip_country_code": {
                                                            "type": "string",
                                                            "description": "注册时的IP国家代码（仅邮箱注册时返回）"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        {
                                            "type": "object",
                                            "title": "注册失败响应",
                                            "properties": {
                                                "ok": {
                                                    "enum": [
                                                        0
                                                    ],
                                                    "type": "integer",
                                                    "description": "状态码：0=注册失败"
                                                },
                                                "msg": {
                                                    "type": "string",
                                                    "examples": [
                                                        "邮箱已存在",
                                                        "该Google账号已注册，请直接登录",
                                                        "该Apple账号已注册，请直接登录",
                                                        "该邮箱已被注册，请使用其他登录方式",
                                                        "Google验证失败，请重试",
                                                        "不支持的注册类型"
                                                    ],
                                                    "description": "错误消息"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        },
                        "description": "注册响应"
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "用户认证相关接口"
        },
        {
            "name": "App",
            "description": "应用基础功能接口"
        },
        {
            "name": "Music",
            "description": "音乐相关接口"
        },
        {
            "name": "Upload",
            "description": "文件上传相关接口"
        },
        {
            "name": "VIP",
            "description": "VIP会员相关接口"
        },
        {
            "name": "Report",
            "description": "举报相关接口"
        },
        {
            "name": "Feedback",
            "description": "用户反馈相关接口"
        },
        {
            "name": "Apple Pay",
            "description": "苹果内购支付相关接口"
        }
    ],
    "servers": [
        {
            "url": "https:\/\/api.aimusic.com",
            "description": "生产环境"
        },
        {
            "url": "https:\/\/dev-api.aimusic.com",
            "description": "开发环境"
        }
    ],
    "components": {
        "schemas": {
            "Feedback": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 123,
                        "description": "Feedback ID"
                    },
                    "uid": {
                        "type": "integer",
                        "example": 10002725,
                        "description": "User ID"
                    },
                    "url": {
                        "type": "string",
                        "example": "feedback\/15927481\/e1fdf8865f6cc1bbb8c8f690bdfa8e8e.jpg,499,493|feedback\/15927481\/9fcb0b640ee794cbee93034b96dc3fa0.jpg,500,490",
                        "description": "Raw image URL string (internal format)"
                    },
                    "images": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "url": {
                                    "type": "string",
                                    "example": "feedback\/15927481\/e1fdf8865f6cc1bbb8c8f690bdfa8e8e.jpg",
                                    "description": "Image URL"
                                },
                                "width": {
                                    "type": "integer",
                                    "example": 499,
                                    "description": "Image width"
                                },
                                "height": {
                                    "type": "integer",
                                    "example": 493,
                                    "description": "Image height"
                                }
                            }
                        },
                        "description": "Parsed image array"
                    },
                    "checker": {
                        "type": "string",
                        "example": null,
                        "description": "Reviewer name"
                    },
                    "content": {
                        "type": "string",
                        "example": "I love this app, but I found a small issue...",
                        "description": "Feedback content"
                    },
                    "add_time": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15 14:30:25",
                        "description": "Feedback submission time"
                    },
                    "status_text": {
                        "type": "string",
                        "example": "Pending",
                        "description": "Review status text"
                    },
                    "check_status": {
                        "type": "integer",
                        "example": 0,
                        "description": "Review status: 0=Pending, 1=Approved, 2=Rejected"
                    },
                    "checked_time": {
                        "type": "string",
                        "format": "date-time",
                        "example": null,
                        "description": "Review time"
                    },
                    "refuse_reason": {
                        "type": "string",
                        "example": "",
                        "description": "Rejection reason"
                    }
                }
            },
            "UserInfo": {
                "type": "object",
                "properties": {
                    "uid": {
                        "type": "integer",
                        "description": "用户ID"
                    },
                    "avatar": {
                        "type": "string",
                        "description": "用户头像URL"
                    },
                    "nickname": {
                        "type": "string",
                        "description": "用户昵称"
                    },
                    "checking_face": {
                        "type": "boolean",
                        "description": "是否正在审核头像"
                    },
                    "checking_name": {
                        "type": "boolean",
                        "description": "是否正在审核昵称"
                    }
                }
            },
            "VipPackage": {
                "type": "object",
                "required": [
                    "id",
                    "title",
                    "price",
                    "days",
                    "period",
                    "product_type",
                    "sku"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 2001,
                        "description": "VIP套餐ID"
                    },
                    "sku": {
                        "type": "string",
                        "example": "com.aimusic.vip.yearly",
                        "description": "产品SKU，用于应用商店支付"
                    },
                    "days": {
                        "type": "integer",
                        "example": 365,
                        "description": "VIP有效天数"
                    },
                    "price": {
                        "type": "string",
                        "example": "99.99",
                        "description": "套餐价格"
                    },
                    "title": {
                        "type": "string",
                        "example": "年费会员",
                        "description": "套餐标题"
                    },
                    "period": {
                        "enum": [
                            "yearly",
                            "monthly",
                            "weekly"
                        ],
                        "type": "string",
                        "example": "yearly",
                        "description": "订阅周期"
                    },
                    "currency": {
                        "type": "string",
                        "example": "USD",
                        "description": "货币单位"
                    },
                    "subtitle": {
                        "type": "string",
                        "example": "畅享一整年AI音乐创作",
                        "description": "套餐副标题"
                    },
                    "is_popular": {
                        "type": "boolean",
                        "example": true,
                        "description": "是否为热门套餐"
                    },
                    "coins_reward": {
                        "type": "object",
                        "properties": {
                            "weekly": {
                                "type": "integer",
                                "example": 4000,
                                "description": "每周获得的金币数（仅年费）"
                            },
                            "immediate": {
                                "type": "integer",
                                "example": 4000,
                                "description": "立即获得的金币数"
                            },
                            "total_weeks": {
                                "type": "integer",
                                "example": 52,
                                "description": "总周数（仅年费）"
                            }
                        },
                        "description": "金币奖励信息"
                    },
                    "product_type": {
                        "enum": [
                            2
                        ],
                        "type": "integer",
                        "example": 2,
                        "description": "产品类型：2=VIP"
                    },
                    "original_price": {
                        "type": "string",
                        "example": "199.99",
                        "description": "原价（用于显示折扣）"
                    },
                    "privilege_list": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "无限音乐生成",
                            "高音质下载",
                            "专属音效模板",
                            "优先客服支持"
                        ],
                        "description": "VIP特权列表"
                    },
                    "discount_percentage": {
                        "type": "integer",
                        "example": 50,
                        "description": "折扣百分比"
                    }
                }
            },
            "MusicDetail": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "description": "音乐ID"
                    },
                    "uid": {
                        "type": "integer",
                        "description": "创建用户ID"
                    },
                    "like": {
                        "type": "integer",
                        "description": "点赞数量"
                    },
                    "mood": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐心情ID（逗号分隔）"
                    },
                    "intro": {
                        "type": "string",
                        "nullable": true,
                        "description": "生成音乐的提示词"
                    },
                    "style": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐风格ID（逗号分隔）"
                    },
                    "lyrics": {
                        "type": "string",
                        "nullable": true,
                        "description": "用户输入的歌词提示词"
                    },
                    "status": {
                        "type": "integer",
                        "description": "音乐状态：0=待AI处理，1=处理完成，-1=已删除"
                    },
                    "duration": {
                        "type": "integer",
                        "description": "音乐时长（秒）"
                    },
                    "is_liked": {
                        "type": "boolean",
                        "description": "当前用户是否点赞了该音乐"
                    },
                    "language": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐语言ID（逗号分隔）"
                    },
                    "media_id": {
                        "type": "integer",
                        "description": "媒体文件ID"
                    },
                    "audio_url": {
                        "type": "string",
                        "description": "音频文件URL"
                    },
                    "instrument": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐乐器ID（逗号分隔）"
                    },
                    "mood_names": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "音乐心情名称数组"
                    },
                    "create_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "创建时间"
                    },
                    "style_names": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "音乐风格名称数组"
                    },
                    "update_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "更新时间"
                    },
                    "audio_duration": {
                        "type": "integer",
                        "description": "音频实际时长（秒），从媒体表获取"
                    },
                    "cover_media_id": {
                        "type": "integer",
                        "description": "封面图媒体ID"
                    },
                    "language_names": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "音乐语言名称数组"
                    },
                    "cover_media_url": {
                        "type": "string",
                        "nullable": true,
                        "description": "封面图URL"
                    },
                    "generated_lyrics": {
                        "type": "string",
                        "nullable": true,
                        "description": "AI生成的完整歌词（带时间轴）"
                    },
                    "instrument_names": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "音乐乐器名称数组"
                    },
                    "intro_pic_media_id": {
                        "type": "integer",
                        "nullable": true,
                        "description": "提示图片媒体ID"
                    },
                    "intro_voice_media_id": {
                        "type": "integer",
                        "nullable": true,
                        "description": "录音文件媒体ID"
                    }
                }
            },
            "MusicOption": {
                "type": "object",
                "example": {
                    "id": 1,
                    "title": "Rock"
                },
                "properties": {
                    "id": {
                        "type": "integer",
                        "description": "选项ID"
                    },
                    "title": {
                        "type": "string",
                        "description": "选项名称"
                    }
                }
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "ok": {
                        "type": "integer",
                        "description": "状态码：0=失败"
                    },
                    "msg": {
                        "type": "string",
                        "description": "错误消息"
                    }
                }
            },
            "MusicHallItem": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "description": "音乐ID"
                    },
                    "uid": {
                        "type": "integer",
                        "description": "创建用户ID"
                    },
                    "like": {
                        "type": "integer",
                        "description": "点赞数量"
                    },
                    "title": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐标题（AI生成，暂时为空）"
                    },
                    "is_like": {
                        "enum": [
                            0,
                            1
                        ],
                        "type": "integer",
                        "description": "当前用户是否点赞：0=未点赞，1=已点赞"
                    },
                    "duration": {
                        "type": "integer",
                        "description": "音乐时长（秒）"
                    },
                    "create_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "创建时间"
                    },
                    "cover_media_url": {
                        "type": "string",
                        "nullable": true,
                        "description": "封面图URL"
                    }
                }
            },
            "MusicListItem": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "description": "音乐ID"
                    },
                    "uid": {
                        "type": "integer",
                        "description": "创建用户ID"
                    },
                    "like": {
                        "type": "integer",
                        "description": "点赞数量"
                    },
                    "mood": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐心情ID（逗号分隔）"
                    },
                    "intro": {
                        "type": "string",
                        "nullable": true,
                        "description": "生成音乐的提示词"
                    },
                    "style": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐风格ID（逗号分隔）"
                    },
                    "lyrics": {
                        "type": "string",
                        "nullable": true,
                        "description": "用户输入的歌词提示词"
                    },
                    "status": {
                        "type": "integer",
                        "description": "音乐状态：0=待AI处理，1=处理完成，-1=已删除"
                    },
                    "duration": {
                        "type": "integer",
                        "description": "音乐时长（秒）"
                    },
                    "language": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐语言ID（逗号分隔）"
                    },
                    "media_id": {
                        "type": "integer",
                        "description": "媒体文件ID"
                    },
                    "instrument": {
                        "type": "string",
                        "nullable": true,
                        "description": "音乐乐器ID（逗号分隔）"
                    },
                    "create_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "创建时间"
                    },
                    "update_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "更新时间"
                    },
                    "cover_media_id": {
                        "type": "integer",
                        "description": "封面图媒体ID"
                    },
                    "cover_media_url": {
                        "type": "string",
                        "nullable": true,
                        "description": "封面图URL"
                    },
                    "intro_pic_media_id": {
                        "type": "integer",
                        "nullable": true,
                        "description": "提示图片媒体ID"
                    },
                    "intro_voice_media_id": {
                        "type": "integer",
                        "nullable": true,
                        "description": "录音文件媒体ID"
                    }
                }
            },
            "UploadPresignedData": {
                "type": "object",
                "required": [
                    "dir",
                    "presigned_post",
                    "upload_id",
                    "is_upload"
                ],
                "properties": {
                    "dir": {
                        "type": "object",
                        "required": [
                            "path"
                        ],
                        "properties": {
                            "path": {
                                "type": "string",
                                "example": "avatar\/10002725\/d73346eeaf0e3d8d0df9df0f92d5c72c.png",
                                "description": "文件在S3中的存储路径"
                            },
                            "small_url": {
                                "type": "string",
                                "example": "avatar\/10002725\/d73346eeaf0e3d8d0df9df0f92d5c72c.png?w=200&h=200",
                                "description": "缩略图URL（如果支持）"
                            },
                            "cover_path": {
                                "type": "string",
                                "example": "avatar\/10002725\/d73346eeaf0e3d8d0df9df0f92d5c72c_cover.jpg",
                                "description": "视频封面图片路径（仅视频类型）"
                            }
                        }
                    },
                    "cover_url": {
                        "type": "string",
                        "example": "https:\/\/s3.amazonaws.com\/bucket\/video_cover.jpg",
                        "description": "已上传的封面图片URL（仅当is_upload=1且为视频类型时返回）"
                    },
                    "is_upload": {
                        "enum": [
                            0,
                            1
                        ],
                        "type": "integer",
                        "example": 0,
                        "description": "文件上传状态：0=未上传，1=已上传（去重时返回）"
                    },
                    "small_url": {
                        "type": "string",
                        "example": "https:\/\/s3.amazonaws.com\/bucket\/image.jpg?w=200&h=200",
                        "description": "缩略图URL（仅当is_upload=1时返回）"
                    },
                    "upload_id": {
                        "type": "integer",
                        "example": 1,
                        "description": "上传记录ID，用于后续标记上传成功"
                    },
                    "presigned_post": {
                        "type": "object",
                        "required": [
                            "url",
                            "method",
                            "enctype",
                            "fields"
                        ],
                        "properties": {
                            "url": {
                                "type": "string",
                                "example": "https:\/\/candyt.s3.amazonaws.com",
                                "description": "S3上传URL"
                            },
                            "fields": {
                                "type": "object",
                                "required": [
                                    "Content-Type",
                                    "key",
                                    "X-Amz-Credential",
                                    "X-Amz-Algorithm",
                                    "X-Amz-Date",
                                    "Policy",
                                    "X-Amz-Signature"
                                ],
                                "properties": {
                                    "key": {
                                        "type": "string",
                                        "example": "avatar\/10002725\/d73346eeaf0e3d8d0df9df0f92d5c72c.png",
                                        "description": "文件在S3中的键名"
                                    },
                                    "Policy": {
                                        "type": "string",
                                        "example": "eyJleHBpcmF0aW9uIjoiMjAyNS0wNy0yOFQxMjo1NTozNFoiLCJjb25kaXRpb25zIjpbeyJidWNrZXQiOiJjYW5keXQifV19",
                                        "description": "Base64编码的上传策略"
                                    },
                                    "X-Amz-Date": {
                                        "type": "string",
                                        "example": "20250728T115534Z",
                                        "description": "AWS请求时间"
                                    },
                                    "Content-Type": {
                                        "type": "string",
                                        "example": "image\/png",
                                        "description": "文件MIME类型"
                                    },
                                    "X-Amz-Algorithm": {
                                        "type": "string",
                                        "example": "AWS4-HMAC-SHA256",
                                        "description": "AWS签名算法"
                                    },
                                    "X-Amz-Signature": {
                                        "type": "string",
                                        "example": "71873b3f1a2e29b2416a07edbed3d8974268a135321f155c493bbd2420a7f627",
                                        "description": "AWS签名"
                                    },
                                    "X-Amz-Credential": {
                                        "type": "string",
                                        "example": "AKIAQYHQL32ABUMEZFRO\/20250728\/us-east-1\/s3\/aws4_request",
                                        "description": "AWS访问凭证"
                                    }
                                },
                                "description": "上传表单字段，需要按顺序添加到FormData中"
                            },
                            "method": {
                                "enum": [
                                    "POST"
                                ],
                                "type": "string",
                                "example": "POST",
                                "description": "HTTP请求方法"
                            },
                            "enctype": {
                                "enum": [
                                    "multipart\/form-data"
                                ],
                                "type": "string",
                                "example": "multipart\/form-data",
                                "description": "表单编码类型"
                            }
                        },
                        "description": "S3预签名POST参数，用于直接上传到S3"
                    },
                    "cover_presigned_post": {
                        "type": "object",
                        "properties": {
                            "url": {
                                "type": "string",
                                "description": "S3上传URL"
                            },
                            "fields": {
                                "type": "object",
                                "description": "上传表单字段"
                            },
                            "method": {
                                "enum": [
                                    "POST"
                                ],
                                "type": "string",
                                "description": "HTTP请求方法"
                            },
                            "enctype": {
                                "enum": [
                                    "multipart\/form-data"
                                ],
                                "type": "string",
                                "description": "表单编码类型"
                            }
                        },
                        "description": "视频封面图片的预签名POST参数（仅视频类型）"
                    }
                }
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "description": "JWT访问令牌，格式：Bearer {token}",
                "bearerFormat": "JWT"
            }
        }
    }
}